<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Quest - Level 2: Dapur (Manajemen Efisiensi)</title>
    <link rel="stylesheet" href="public/main.css">
    <link rel="stylesheet" href="public/scene3-level2.css">
    <script src="public/globalGameState.js"></script>
    <script src="public/audio-manager.js"></script>
</head>
<body>
    <!-- Scene 3 Level 2 Container -->
    <div id="scene3-level2-container" class="scene-container hidden">
        <!-- Background -->
        <div class="scene-background">
            <img src="public/images/kitchen-background.jpg" alt="Latar Belakang Dapur" class="background-image">
            <div class="background-overlay"></div>
        </div>

        <!-- HUD Interface -->
        <div class="hud-interface">
            <!-- Left Panel -->
            <div class="hud-left-panel">
                <div class="level-info">
                    <h2>ğŸ³ Level 2: Dapur</h2>
                    <p>Tantangan Manajemen Efisiensi Energi</p>
                </div>
                
                <div class="objectives-panel">
                    <h3>ğŸ¯ Misi</h3>
                    <ul class="objectives-list">
                        <li id="obj-power-meter" class="objective">
                            <span class="obj-status">â³</span>
                            Jaga meteran daya di zona hijau
                        </li>
                        <li id="obj-natural-light" class="objective">
                            <span class="obj-status">â³</span>
                            Manfaatkan cahaya alami
                        </li>
                        <li id="obj-efficiency" class="objective">
                            <span class="obj-status">â³</span>
                            Capai target efisiensi energi
                        </li>
                    </ul>
                </div>

                <div class="inventory-panel">
                    <h3>ğŸ”‘ Kunci Energi</h3>
                    <div id="energy-keys-container" class="energy-keys">
                        <!-- åŠ¨æ€æ·»åŠ èƒ½é‡é’¥åŒ™ -->
                    </div>
                </div>
            </div>

            <!-- Right Panel - Power Meter -->
            <div class="hud-right-panel">
                <div class="power-meter-container">
                    <h3>åŠŸç‡è¡¨</h3>
                    <div class="power-meter">
                        <div class="meter-scale">
                            <div class="scale-mark" data-value="0">0</div>
                            <div class="scale-mark" data-value="20">20</div>
                            <div class="scale-mark" data-value="40">40</div>
                            <div class="scale-mark" data-value="60">60</div>
                            <div class="scale-mark" data-value="80">80</div>
                            <div class="scale-mark" data-value="100">100</div>
                        </div>
                        <div class="meter-bar">
                            <div id="power-level" class="power-level" data-level="0"></div>
                        </div>
                        <div class="meter-zones">
                            <div class="zone green-zone" data-range="0-60">ç»¿è‰²åŒºåŸŸ (0-60)</div>
                            <div class="zone yellow-zone" data-range="61-80">é»„è‰²åŒºåŸŸ (61-80)</div>
                            <div class="zone red-zone" data-range="81-100">çº¢è‰²åŒºåŸŸ (81-100)</div>
                        </div>
                    </div>
                    <div class="power-value">
                        <span id="current-power">0</span> / 100 W
                    </div>
                </div>

                <div class="efficiency-score">
                    <h4>èƒ½æ•ˆå¾—åˆ†</h4>
                    <div id="efficiency-points" class="score-display">0</div>
                </div>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="game-area">
            <!-- Kitchen Layout -->
            <div class="kitchen-layout">
                <!-- Window -->
                <div id="window-obj" class="interactive-object window-object" data-device="window">
                    <div class="window-frame">
                        <div id="window-panels" class="window-panels closed">
                            <div class="window-panel left-panel"></div>
                            <div class="window-panel right-panel"></div>
                        </div>
                        <div class="window-light-effect"></div>
                    </div>
                    <div class="object-label">çª—æˆ·</div>
                </div>

                <!-- Main Light -->
                <div id="main-light-obj" class="interactive-object light-object" data-device="main-light">
                    <div class="light-fixture">
                        <div class="light-bulb"></div>
                        <div class="light-glow"></div>
                    </div>
                    <div class="object-label">ä¸»ç¯</div>
                </div>

                <!-- Refrigerator -->
                <div id="fridge-obj" class="interactive-object fridge-object" data-device="fridge">
                    <div class="fridge-body">
                        <div id="fridge-door" class="fridge-door closed">
                            <div class="door-handle"></div>
                            <div class="door-seal"></div>
                        </div>
                        <div class="fridge-interior">
                            <div class="fridge-light"></div>
                            <div class="fridge-shelves"></div>
                        </div>
                    </div>
                    <div class="object-label">å†°ç®±</div>
                </div>

                <!-- Rice Cooker -->
                <div id="rice-cooker-obj" class="interactive-object rice-cooker-object" data-device="rice-cooker">
                    <div class="rice-cooker-body">
                        <div class="cooker-lid"></div>
                        <div class="cooker-display">
                            <span id="cooker-mode">æ™®é€š</span>
                        </div>
                        <div class="cooker-buttons">
                            <button class="mode-btn" data-mode="normal">æ™®é€š</button>
                            <button class="mode-btn" data-mode="eco">èŠ‚èƒ½</button>
                        </div>
                    </div>
                    <div class="object-label">ç”µé¥­ç…²</div>
                </div>

                <!-- Fan -->
                <div id="fan-obj" class="interactive-object fan-object" data-device="fan">
                    <div class="fan-base">
                        <div id="fan-blades" class="fan-blades">
                            <div class="blade"></div>
                            <div class="blade"></div>
                            <div class="blade"></div>
                        </div>
                        <div class="fan-motor"></div>
                    </div>
                    <div class="object-label">é£æ‰‡</div>
                </div>

                <!-- Iron -->
                <div id="iron-obj" class="interactive-object iron-object" data-device="iron">
                    <div class="iron-body">
                        <div class="iron-plate"></div>
                        <div class="iron-handle"></div>
                        <div class="iron-indicator"></div>
                    </div>
                    <div class="object-label">ç†¨æ–—</div>
                </div>

                <!-- Kitchen Energy Guide Character -->
                <div id="kitchen-guide" class="kitchen-energy-guide">
                    <img src="./public/real-images/kitchen-guide.svg" alt="Kitchen Guide" width="140" height="180" class="guide-svg">
                    
                    <div class="guide-speech-bubble hidden" id="guide-speech">
                        <div class="speech-content">
                            <p id="guide-speech-text">Halo! Saya Chef Eco, ahli hemat energi dapur!</p>
                        </div>
                        <div class="speech-arrow"></div>
                    </div>
                </div>
                
                <!-- Characters -->
                <div class="character character-1">
                    <img src="public/images/character1.png" alt="è§’è‰²1">
                </div>
                <div class="character character-2">
                    <img src="public/images/character2.png" alt="è§’è‰²2">
                </div>
            </div>
        </div>

        <!-- Device Status Panel -->
        <div id="device-status-panel" class="device-status-panel">
            <h3>è®¾å¤‡çŠ¶æ€</h3>
            <div class="device-list">
                <div class="device-item" data-device="window">
                    <span class="device-name">çª—æˆ·</span>
                    <span class="device-status">å…³é—­</span>
                    <span class="device-power">0W</span>
                </div>
                <div class="device-item" data-device="main-light">
                    <span class="device-name">ä¸»ç¯</span>
                    <span class="device-status">å…³é—­</span>
                    <span class="device-power">0W</span>
                </div>
                <div class="device-item" data-device="fridge">
                    <span class="device-name">å†°ç®±</span>
                    <span class="device-status">è¿è¡Œ</span>
                    <span class="device-power">150W</span>
                </div>
                <div class="device-item" data-device="rice-cooker">
                    <span class="device-name">ç”µé¥­ç…²</span>
                    <span class="device-status">å…³é—­</span>
                    <span class="device-power">0W</span>
                </div>
                <div class="device-item" data-device="fan">
                    <span class="device-name">é£æ‰‡</span>
                    <span class="device-status">å…³é—­</span>
                    <span class="device-power">0W</span>
                </div>
                <div class="device-item" data-device="iron">
                    <span class="device-name">ç†¨æ–—</span>
                    <span class="device-status">å…³é—­</span>
                    <span class="device-power">0W</span>
                </div>
            </div>
        </div>

        <!-- Hint Bubble -->
        <div id="hint-bubble" class="hint-bubble hidden">
            <div class="hint-content">
                <p id="hint-text">ç‚¹å‡»çª—æˆ·æ¥åˆ©ç”¨è‡ªç„¶å…‰</p>
                <button id="hint-close" class="hint-close">Ã—</button>
            </div>
        </div>

        <!-- Success Message -->
        <div id="success-message" class="success-message hidden">
            <div class="success-content">
                <h2 id="success-title">èƒ½æ•ˆç›®æ ‡è¾¾æˆï¼</h2>
                <p id="success-text">ä½ æˆåŠŸç®¡ç†äº†å¨æˆ¿çš„èƒ½æºä½¿ç”¨ï¼Œä¿æŒäº†é«˜æ•ˆç‡è¿è¡Œã€‚</p>
                <button id="success-continue" class="success-btn">ç»§ç»­</button>
            </div>
        </div>

        <!-- Educational Popup -->
        <div id="educational-popup" class="educational-popup hidden">
            <div class="edu-content">
                <h3 id="edu-title">èƒ½æ•ˆçŸ¥è¯†</h3>
                <p id="edu-content">åˆ©ç”¨è‡ªç„¶å…‰å¯ä»¥æ˜¾è‘—é™ä½ç…§æ˜èƒ½è€—</p>
                <div id="edu-detail" class="edu-detail">
                    è‡ªç„¶å…‰ä¸ä»…å…è´¹ï¼Œè¿˜èƒ½æä¾›æ›´å¥½çš„ç…§æ˜è´¨é‡ã€‚åˆç†åˆ©ç”¨çª—æˆ·å’Œå¤©çª—ï¼Œå¯ä»¥åœ¨ç™½å¤©å‡å°‘äººå·¥ç…§æ˜çš„ä½¿ç”¨ï¼Œä»è€ŒèŠ‚çº¦ç”µèƒ½ã€‚åŒæ—¶ï¼Œè‡ªç„¶å…‰å¯¹äººä½“å¥åº·ä¹Ÿæœ‰ç§¯æä½œç”¨ã€‚
                </div>
                <div class="edu-actions">
                    <button id="edu-expand-btn" class="edu-expand">äº†è§£æ›´å¤š</button>
                    <button id="edu-close" class="edu-close">å…³é—­</button>
                </div>
            </div>
        </div>

        <!-- Fridge Timer Warning -->
        <div id="fridge-warning" class="fridge-warning hidden">
            <div class="warning-content">
                <h4>âš ï¸ å†°ç®±é—¨å¼€å¯è¿‡ä¹…</h4>
                <p>å†°ç®±é—¨å¼€å¯è¶…è¿‡5ç§’ä¼šå¢åŠ èƒ½è€—</p>
                <div class="timer-display">
                    <span id="fridge-timer">5</span>ç§’
                </div>
            </div>
        </div>

        <!-- Helper Character Tooltip -->
        <div id="helper-tooltip" class="helper-tooltip hidden">
            <div class="tooltip-content">
                <div class="helper-avatar">ğŸ¤–</div>
                <p id="helper-text">è¯•è¯•æ‰“å¼€çª—æˆ·æ¥æ›¿ä»£ç”µç¯ç…§æ˜</p>
                <button id="helper-close" class="tooltip-close">Ã—</button>
            </div>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="sfx-ding" preload="auto">
        <source src="public/audio/sfx_ding.wav" type="audio/wav">
    </audio>
    <audio id="sfx-buzz" preload="auto">
        <source src="public/audio/sfx_buzz.wav" type="audio/wav">
    </audio>
    <audio id="sfx-click" preload="auto">
        <source src="public/audio/sfx_click.wav" type="audio/wav">
    </audio>
    <audio id="ambient-kitchen" preload="auto" loop>
        <source src="public/audio/ambient_kitchen.mp3" type="audio/mpeg">
    </audio>

    <!-- Scripts -->
    <script src="scripts/globalGameState.js"></script>
<script src="scripts/narrativeSystem.js"></script>
<script src="scripts/scene3-level2.js"></script>
</body>
</html>