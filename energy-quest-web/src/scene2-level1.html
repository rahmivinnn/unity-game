<!DOCTYPE html>
<html lang="id-ID">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scene 2 - Level 1: Ruang Tamu (Rangkaian Dasar)</title>
    <link rel="stylesheet" href="public/main.css">
    <link rel="stylesheet" href="public/scene2-level1.css">
    <script src="public/audio-manager.js"></script>
</head>
<body>
    <!-- Scene 2 Level 1: Kontainer Ruang Tamu -->
    <div id="scene2-level1-container">
        <!-- Layer Latar Belakang -->
        <div id="living-room-background">
            <img src="../../../Image/living room.png" alt="Latar Belakang Ruang Tamu" id="living-room-bg">
        </div>

        <!-- Antarmuka HUD -->
        <div id="level1-hud">
            <!-- Panel Kiri -->
            <div class="left-panel">
                <div class="character-display">
                    <img src="../../../Image/2 karakter.png" alt="Karakter" class="character-avatar">
                </div>
                <div class="inventory-panel">
                    <h3>Kunci Energi</h3>
                    <div id="energy-keys-container">
                        <!-- Kunci energi akan ditambahkan secara dinamis di sini -->
                    </div>
                </div>
                <div class="power-status">
                    <h3>Status Listrik</h3>
                    <div class="power-indicator">
                        <span id="living-room-power-status">‚ùå Ruang Tamu Mati Listrik</span>
                    </div>
                </div>
            </div>

            <!-- Panel Kontrol Kanan -->
            <div class="right-panel">
                <div class="level-info">
                    <h2>Level 1: Rangkaian Dasar Ruang Tamu</h2>
                    <p>Tujuan: Perbaiki rangkaian, nyalakan ruang tamu</p>
                </div>
                <div class="progress-tracker">
                    <div class="task-item" id="task-cable">
                        <span class="task-icon">üîå</span>
                        <span class="task-text">Perbaiki Koneksi Kabel</span>
                        <span class="task-status">‚è≥</span>
                    </div>
                    <div class="task-item" id="task-tv">
                        <span class="task-icon">üì∫</span>
                        <span class="task-text">Nyalakan TV</span>
                        <span class="task-status">üîí</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Area Permainan Utama -->
        <div id="living-room-main">
            <!-- SVG Karakter Pemandu -->
            <div id="character-guide" class="character-guide">
                <svg width="120" height="150" viewBox="0 0 120 150" class="character-svg">
                    <!-- Badan -->
                    <ellipse cx="60" cy="100" rx="25" ry="35" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2" class="character-body"/>
                    <!-- Kepala -->
                    <circle cx="60" cy="45" r="20" fill="#FFE4B5" stroke="#D4A574" stroke-width="2" class="character-head"/>
                    <!-- Mata -->
                    <circle cx="55" cy="40" r="3" fill="#333" class="character-eye-left"/>
                    <circle cx="65" cy="40" r="3" fill="#333" class="character-eye-right"/>
                    <!-- Mulut -->
                    <path d="M 52 50 Q 60 55 68 50" stroke="#333" stroke-width="2" fill="none" class="character-mouth"/>
                    <!-- Lengan -->
                    <line x1="35" y1="85" x2="25" y2="110" stroke="#FFE4B5" stroke-width="8" stroke-linecap="round" class="character-arm-left"/>
                    <line x1="85" y1="85" x2="95" y2="110" stroke="#FFE4B5" stroke-width="8" stroke-linecap="round" class="character-arm-right"/>
                    <!-- Kaki -->
                    <line x1="50" y1="130" x2="45" y2="145" stroke="#4A90E2" stroke-width="10" stroke-linecap="round" class="character-leg-left"/>
                    <line x1="70" y1="130" x2="75" y2="145" stroke="#4A90E2" stroke-width="10" stroke-linecap="round" class="character-leg-right"/>
                    <!-- Sabuk Alat -->
                    <rect x="45" y="95" width="30" height="8" fill="#8B4513" rx="2" class="character-belt"/>
                    <circle cx="52" cy="99" r="3" fill="#FFD700" class="character-tool"/>
                    <circle cx="60" cy="99" r="3" fill="#C0C0C0" class="character-tool"/>
                    <circle cx="68" cy="99" r="3" fill="#FF6B6B" class="character-tool"/>
                </svg>
                <div class="character-speech-bubble hidden" id="character-speech">
                    <div class="speech-content">
                        <p id="speech-text">Halo! Saya akan membantu kamu belajar hemat energi!</p>
                    </div>
                    <div class="speech-arrow"></div>
                </div>
            </div>
            
            <!-- Objek Interaktif -->
            <div class="interactive-objects">
                <!-- Baterai -->
                <div class="interactive-item battery" id="battery-obj" data-object="battery">
                    <div class="object-highlight"></div>
                    <div class="object-label">Baterai</div>
                </div>

                <!-- Saklar -->
                <div class="interactive-item switch" id="switch-obj" data-object="switch">
                    <div class="object-highlight"></div>
                    <div class="object-label">Saklar</div>
                    <svg width="50" height="70" viewBox="0 0 50 70" class="switch-svg">
                        <!-- Switch Plate -->
                        <rect x="10" y="10" width="30" height="50" rx="5" fill="#F5F5F5" stroke="#DDD" stroke-width="2"/>
                        <!-- Switch Toggle -->
                        <rect x="15" y="25" width="20" height="15" rx="7" fill="#E0E0E0" stroke="#CCC" stroke-width="1" class="switch-toggle"/>
                        <!-- Switch Button -->
                        <circle cx="25" cy="32" r="6" fill="#FFF" stroke="#999" stroke-width="1" class="switch-button"/>
                        <!-- Power Indicator -->
                        <circle cx="25" cy="50" r="3" fill="#FF4444" class="switch-indicator" opacity="0.3"/>
                        <!-- Screws -->
                        <circle cx="17" cy="17" r="1.5" fill="#999"/>
                        <circle cx="33" cy="17" r="1.5" fill="#999"/>
                        <circle cx="17" cy="53" r="1.5" fill="#999"/>
                        <circle cx="33" cy="53" r="1.5" fill="#999"/>
                    </svg>
                </div>

                <!-- Lampu -->
                <div class="interactive-item lamp" id="lamp-obj" data-object="lamp">
                    <div class="object-highlight"></div>
                    <div class="object-label">Lampu</div>
                    <div class="lamp-glow" id="lamp-glow">
                        <svg width="60" height="80" viewBox="0 0 60 80" class="lamp-svg">
                            <!-- Lamp Base -->
                            <rect x="20" y="65" width="20" height="10" rx="2" fill="#8B4513"/>
                            <!-- Lamp Neck -->
                            <rect x="27" y="55" width="6" height="15" fill="#A0522D"/>
                            <!-- Bulb -->
                            <circle cx="30" cy="35" r="20" fill="#FFF8DC" stroke="#E6E6FA" stroke-width="2" class="lamp-bulb"/>
                            <!-- Filament -->
                            <path d="M 20 35 Q 30 25 40 35 Q 30 45 20 35" stroke="#FFD700" stroke-width="1" fill="none" class="lamp-filament" opacity="0"/>
                            <!-- Glow Effect -->
                            <circle cx="30" cy="35" r="25" fill="url(#lampGlow)" class="lamp-glow-effect" opacity="0"/>
                            <!-- Gradient Definition -->
                            <defs>
                                <radialGradient id="lampGlow" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" style="stop-color:#FFFF99;stop-opacity:0.8" />
                                    <stop offset="70%" style="stop-color:#FFD700;stop-opacity:0.4" />
                                    <stop offset="100%" style="stop-color:#FFA500;stop-opacity:0" />
                                </radialGradient>
                            </defs>
                        </svg>
                    </div>
                </div>

                <!-- TV -->
                <div class="interactive-item tv" id="tv-obj" data-object="tv">
                    <div class="object-highlight"></div>
                    <div class="object-label">TV Lama</div>
                    <div class="tv-screen" id="tv-screen">
                        <svg width="80" height="60" viewBox="0 0 80 60" class="tv-svg">
                            <!-- TV Body -->
                            <rect x="5" y="10" width="70" height="45" rx="5" fill="#2D2D2D" stroke="#1A1A1A" stroke-width="2"/>
                            <!-- Screen -->
                            <rect x="10" y="15" width="60" height="35" rx="2" fill="#000" class="tv-screen-area"/>
                            <!-- Screen Content (when on) -->
                            <rect x="10" y="15" width="60" height="35" rx="2" fill="url(#tvGradient)" class="tv-screen-content" opacity="0"/>
                            <!-- Power Button -->
                            <circle cx="15" cy="52" r="3" fill="#FF4444" class="tv-power-btn"/>
                            <!-- Antenna -->
                            <line x1="40" y1="10" x2="35" y2="2" stroke="#666" stroke-width="2"/>
                            <line x1="40" y1="10" x2="45" y2="2" stroke="#666" stroke-width="2"/>
                            <!-- Gradient Definition -->
                            <defs>
                                <linearGradient id="tvGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#4A90E2;stop-opacity:0.8" />
                                    <stop offset="50%" style="stop-color:#87CEEB;stop-opacity:0.6" />
                                    <stop offset="100%" style="stop-color:#4A90E2;stop-opacity:0.8" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                </div>

                <!-- Area Meja Kabel -->
                <div class="interactive-item cable-table" id="cable-table-obj" data-object="cable_table">
                    <div class="object-highlight"></div>
                    <div class="object-label">Meja Kerja Kabel</div>
                    <div class="cable-pieces-preview">
                        <div class="cable-piece"></div>
                        <div class="cable-piece"></div>
                        <div class="cable-piece"></div>
                    </div>
                </div>
            </div>

            <!-- Gelembung Petunjuk -->
            <div id="hint-bubble" class="hint-bubble hidden">
                <div class="hint-content">
                    <p id="hint-text"></p>
                    <button id="hint-close">√ó</button>
                </div>
            </div>
        </div>

        <!-- Puzzle A: Panel Koneksi Kabel -->
        <div id="cable-puzzle-overlay" class="puzzle-overlay hidden">
            <div class="puzzle-panel">
                <div class="puzzle-header">
                    <h3>Perbaiki Koneksi Sirkuit</h3>
                    <button id="cable-puzzle-close" class="close-btn">√ó</button>
                </div>
                <div class="puzzle-content">
                    <div class="circuit-grid" id="circuit-grid">
                        <!-- Grid Komponen Sirkuit -->
                        <div class="grid-slot" data-slot="battery-pos" data-type="battery-positive">
                            <div class="slot-label">Baterai (+)</div>
                        </div>
                        <div class="grid-slot" data-slot="switch" data-type="switch">
                            <div class="slot-label">Saklar</div>
                        </div>
                        <div class="grid-slot" data-slot="lamp" data-type="lamp">
                            <div class="slot-label">Lampu</div>
                        </div>
                        <div class="grid-slot" data-slot="battery-neg" data-type="battery-negative">
                            <div class="slot-label">Baterai (-)</div>
                        </div>
                    </div>
                    <div class="components-area">
                        <h4>Seret komponen ke posisi yang benar</h4>
                        <div class="draggable-components">
                            <div class="component" data-component="battery-positive" draggable="true">
                                <div class="component-icon">üîã+</div>
                                <div class="component-label">Kutub Positif Baterai</div>
                            </div>
                            <div class="component" data-component="switch" draggable="true">
                                <div class="component-icon">üîò</div>
                                <div class="component-label">Saklar</div>
                            </div>
                            <div class="component" data-component="lamp" draggable="true">
                                <div class="component-icon">üí°</div>
                                <div class="component-label">Lampu</div>
                            </div>
                            <div class="component" data-component="battery-negative" draggable="true">
                                <div class="component-icon">üîã-</div>
                                <div class="component-label">Kutub Negatif Baterai</div>
                            </div>
                        </div>
                    </div>
                    <div class="cable-connections" id="cable-connections">
                        <!-- Kabel koneksi akan digambar secara dinamis di sini -->
                        <svg id="connection-svg" width="100%" height="100%">
                            <!-- Garis koneksi akan ditambahkan secara dinamis melalui JavaScript -->
                        </svg>
                    </div>
                </div>
                <div class="puzzle-controls">
                    <button id="test-circuit" class="puzzle-btn">Tes Sirkuit</button>
                    <button id="reset-circuit" class="puzzle-btn secondary">Reset</button>
                </div>
            </div>
        </div>

        <!-- Puzzle B: Panel Kontrol TV -->
        <div id="tv-puzzle-overlay" class="puzzle-overlay hidden">
            <div class="puzzle-panel">
                <div class="puzzle-header">
                    <h3>Nyalakan TV Lama</h3>
                    <button id="tv-puzzle-close" class="close-btn">√ó</button>
                </div>
                <div class="puzzle-content">
                    <div class="tv-front-panel">
                        <div class="tv-screen-large" id="tv-screen-large">
                            <div class="screen-static" id="screen-static"></div>
                            <div class="screen-content" id="screen-content"></div>
                        </div>
                        <div class="tv-controls">
                            <div class="control-step" data-step="1" id="step-cable">
                                <div class="step-icon">üîå</div>
                                <div class="step-label">Colokkan kabel listrik</div>
                                <div class="step-status">‚è≥</div>
                            </div>
                            <div class="control-step" data-step="2" id="step-switch">
                                <div class="step-icon">üîò</div>
                                <div class="step-label">Nyalakan saklar utama</div>
                                <div class="step-status">üîí</div>
                            </div>
                            <div class="control-step" data-step="3" id="step-power">
                                <div class="step-icon">‚ö°</div>
                                <div class="step-label">Tekan tombol power</div>
                                <div class="step-status">üîí</div>
                            </div>
                            <div class="control-step" data-step="4" id="step-channel">
                                <div class="step-icon">üì°</div>
                                <div class="step-label">Atur saluran</div>
                                <div class="step-status">üîí</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel Pesan Sukses -->
        <div id="success-message" class="message-overlay hidden">
            <div class="message-panel">
                <div class="message-content">
                    <div class="success-icon">üéâ</div>
                    <h3 id="success-title">Selamat!</h3>
                    <p id="success-text"></p>
                    <div class="reward-display" id="reward-display">
                        <!-- Animasi hadiah akan ditampilkan di sini -->
                    </div>
                </div>
                <button id="success-continue" class="continue-btn">Lanjutkan</button>
            </div>
        </div>

        <!-- Panel Informasi Edukasi -->
        <div id="educational-popup" class="popup-overlay hidden">
            <div class="popup-panel">
                <div class="popup-header">
                    <h3 id="edu-title">Poin Pembelajaran</h3>
                    <button id="edu-close" class="close-btn">√ó</button>
                </div>
                <div class="popup-content">
                    <p id="edu-content"></p>
                    <div class="edu-expand" id="edu-expand">
                        <button id="edu-expand-btn">Pelajari Lebih Lanjut</button>
                        <div class="edu-detail" id="edu-detail"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Elemen audio -->
    <!-- Background Music -->
    <audio id="background-music" preload="auto" loop>
        <source src="public/audio/background_music.mp3" type="audio/mpeg">
        <source src="../../../sound/sound.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Dramatic Sound for Videos -->
    <audio id="dramatic-sound" preload="auto">
        <source src="public/audio/dramatic_sound.mp3" type="audio/mpeg">
        <source src="../../../sound/sound.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Game Sound Effects -->
    <audio id="sfx-click-success" preload="auto">
        <source src="../../../sound/sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-buzz" preload="auto">
        <source src="../../../sound/sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-ding" preload="auto">
        <source src="../../../sound/sound.mp3" type="audio/mpeg">
    </audio>

    <!-- JavaScript -->
    <script src="scripts/scene2-level1.js"></script>
</body>
</html>